<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
<style>
  body{
    background: linear-gradient(90deg, #ffd7e4 0%, #c8f1ff 100%);
  }
  .box {
      position: relative;
  }
  img {
      width: 200px;
      height: auto;
      padding: 10px;
      border-radius: 20px;
  }
</style>
</head>
<body>
  <div class="box">
  </div>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script>
  $.getJSON("https://image.gincode.icu/api/manage/list", function(data) {
    imgList =JSON.parse(data);
    var targetElement = document.querySelector('.box');
    console.log(data)
    let str ='';
    for (let i = 0; i < imgList.length; i++){
      if(imgList[i].name.indexOf(".mp4")>0)continue;
      str += '<img data-original='+"/file/"+imgList[i].name+' src='+"/file/"+imgList[i].name +'>';
    }
    targetElement.innerHTML = str
  });
</script>
</body>
</html>
<script>
// 在这里编写你的代码
$(function () {
        // 获取图片的宽度(200px)
        let imgWidth = $('img').outerWidth(); // 200
        //console.log(imgWidth)
        waterfallHandler();

        // 瀑布流处理
        function waterfallHandler() {
            // 获取图片的列数
            let column = parseInt($(window).width() / imgWidth);
            //console.log(column)
            // 高度数组
            let heightArr = [];
            for(let i=0; i<column; i++) {
                heightArr[i] = 0;
            }
            $.each($('img'), function (index, item) {
                // 当前元素的高度
                let itemHeight = $(item).outerHeight();
                // 高度数组最小的高度
                let minHeight = Math.min(...heightArr);
                // 高度数组最小的高度的索引
                let minIndex = heightArr.indexOf(minHeight);
                $(item).css({
                    position: 'absolute',
                    top: minHeight + 'px',
                    left: minIndex * imgWidth + 'px'
                });

                heightArr[minIndex] += itemHeight;
            });
        }

        // 窗口大小改变
        $(window).resize(function () {
            waterfallHandler();
        });
    });
</script>
